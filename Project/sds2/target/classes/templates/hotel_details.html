<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8" />
    <title th:text="${hotel != null && cityName != null ? cityName : 'Hotel details'}">Hotel details</title>
    <link rel="stylesheet" href="/./style/style.css"/>
    <link rel="stylesheet" href="/./style/hotels.css"/>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.45; }
        header { margin-bottom: 16px; }
        .section { margin: 16px 0; }
        .meta { color: #555; font-size: 0.95em; }
        .card { border: 1px solid #ddd; border-radius: 6px; padding: 12px; }
        ul { margin: 6px 0 0 18px; }
        .back { margin-top: 12px; display: inline-block; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 6px 8px; text-align: left; }
        th { background: #f9f9f9; }
    </style>
</head>
<!-- <body>
<header>
    <h1 th:text="${hotel != null && hotel.name != null ? hotel.name : 'Hotel'}">Hotel</h1>
    <p class="meta">
        <span th:if="${hotel != null && hotel.address != null}" th:text="${hotel.address}">Address</span>
        <span th:if="${checkInDate != null && checkOutDate != null}"> • Dates: <span th:text="${checkInDate}"></span> → <span th:text="${checkOutDate}"></span></span>
    </p>
    <div class="card" th:if="${param.err != null or param.bs != null}" style="margin-top:8px;">
        <div th:if="${param.err != null}" class="meta" style="color:#a33;">
            Booking failed: <span th:text="${param.err}">error</span>
        </div>
        <div th:if="${param.err == null and param.bs != null}" class="meta" style="color:#2a6;">
            Booking status: <strong th:text="${param.bs}">status</strong>
            <span th:if="${param.cn != null}"> • Confirmation: <strong th:text="${param.cn}">CN</strong></span>
            <span th:if="${param.oid != null}"> • Order: <span th:text="${param.oid}">OID</span></span>
        </div>
    </div>
    <div class="actions">
        <a class="btn btn-ghost" href="/">Back to home</a>
        <a class="btn btn-primary" th:if="${hotel != null && hotel.latitude != null && hotel.longitude != null}"
           th:href="${'https://www.google.com/maps/search/?api=1&query=' + hotel.latitude + ',' + hotel.longitude}"
           target="_blank" rel="noopener">Open in Maps</a>
    </div>
</header>

<section class="section card" th:if="${amenities != null && !#lists.isEmpty(amenities)}">
    <h2>Amenities</h2>
    <ul>
        <li th:each="a : ${amenities}" th:text="${a}">Amenity</li>
    </ul>
</section>

<section class="section card" th:if="${offers != null && offers.size() > 0}">
    <h2>
        <span th:if="${checkInDate != null && checkOutDate != null}"
              th:text="${'Offers from ' + checkInDate + ' to ' + checkOutDate}">Offers</span>
        <span th:if="${checkInDate == null or checkOutDate == null}">Offers</span>
    </h2>
    <div>
        <div>
            <table class="table">
                <thead>
                <tr>
                    <th>Room</th>
                    <th>Guests</th>
                    <th>Board</th>
                    <th>Price</th>
                    <th>Currency</th>
                    <th>Cancelable</th>
                    <th>Reserve</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="off : ${offers}">
                    <td th:text="${off.roomType() != null ? off.roomType() : 'N/A'}">N/A</td>
                    <td th:text="${off.adults() != null ? off.adults() : 'N/A'}">N/A</td>
                    <td th:text="${off.boardType() != null ? off.boardType() : 'N/A'}">N/A</td>
                    <td th:text="${off.total() != null ? off.total() : 'N/A'}">N/A</td>
                    <td th:text="${off.currency() != null ? off.currency() : 'N/A'}">N/A</td>
                    <td>Unknown</td>
                    <td>
                        <form th:action="@{/amadeus/hotels/{city}/{hid}/book(city=${cityName},hid=${hotel.hotelId})}" method="post">
                            <input type="hidden" name="hotelOfferId" th:value="${off.offerId()}" />
                            <input type="hidden" name="checkInDate" th:if="${checkInDate != null}" th:value="${checkInDate}" />
                            <input type="hidden" name="checkOutDate" th:if="${checkOutDate != null}" th:value="${checkOutDate}" />
                            <input type="text" name="firstName" placeholder="First name" required style="width:110px" />
                            <input type="text" name="lastName" placeholder="Last name" required style="width:110px" />
                            <input type="email" name="email" placeholder="Email" required style="width:160px" />
                            <input type="tel" name="phone" placeholder="Phone" style="width:120px" />
                            <button type="submit" class="btn btn-primary">Reserve</button>
                        </form>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</section>

<section class="section card" th:if="${(checkInDate != null and checkOutDate != null) and (offers == null or offers.size() == 0)}">
    <h2 th:text="${'Offers from ' + checkInDate + ' to ' + checkOutDate}">Offers</h2>
    <p>No availability for the selected dates.</p>
    <p class="meta">Try different dates or adjust your criteria.</p>
    
</section>

</body> -->
</html>
